<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>KSX - 个人博客</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Website Template by GetTemplates.co" />
	<meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />

	<link href="../../favicon.ico" rel="icon" type="image/x-icon" />
	<link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i|Roboto+Mono" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="../../css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="../../css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="../../css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="../../css/magnific-popup.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="../../css/style.css">

	<!-- Modernizr JS -->
	<script src="../../js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	</head>
	<body>
		
	<div class="gtco-loader"></div>
	
	<div id="page">
	<nav class="gtco-nav" role="navigation">
		<div class="container">
			<div class="row">
				<div class="col-xs-2 text-left">
					<div id="gtco-logo"><a href="index.html">KSX<span>.</span></a></div>
				</div>
				<div class="col-xs-10 text-right menu-1">
					<ul>
						<li><a href="../../index.html" style="font-size:14px;">首页</a></li>
						<li><a href="../../category.html" style="font-size:14px;">分类</a></li>
						<li class="has-dropdown">
							<a style="font-size:14px;">API</a>
							<ul class="dropdown">
								<li><a href="http://itmyhome.com/git/" target="_blank">Git</a></li>
								<li><a href="http://itmyhome.com/progit/" target="_blank">Pro Git</a></li>
								<li><a href="http://itmyhome.com/jq/" target="_blank">JQuery</a></li>
								<li><a href="http://itmyhome.com/easyui/" target="_blank">EasyUI</a></li>
								<li><a href="http://itmyhome.com/bootstrap/" target="_blank">Bootstrap</a></li>
								<li><a href="http://itmyhome.com/markdown/" target="_blank">Markdown</a></li>
								<li><a href="http://itmyhome.com/front/" target="_blank">前端开发规范手册</a></li>
								<li><a href="http://itmyhome.com/js/" target="_blank">JavaScript</a></li>
								<li><a href="http://itmyhome.com/html/" target="_blank">HTML</a></li>
								<li><a href="http://itmyhome.com/css/" target="_blank">CSS</a></li>
								<li><a href="http://itmyhome.com/rgb/" target="_blank">RGB</a></li>
							</ul>
						</li>
						<li class="has-dropdown">
							<a style="font-size:14px;">PDF</a>
							<ul class="dropdown">
								<li><a href="http://itmyhome.com/progit-pdf/" target="_blank">Pro Git </a></li>
								<li><a href="http://itmyhome.com/the-definitive-guide-of-git-pdf/" target="_blank">Git权威指南</a></li>
								<li><a href="http://itmyhome.com/javascript-pdf/" target="_blank">JavaScript权威指南</a></li>
								<li><a href="http://itmyhome.com/jquery-in-action-pdf/" target="_blank">jQuery实战</a></li>
								<li><a href="http://itmyhome.com/mybatis-pdf/" target="_blank">MyBatis3用户指南</a></li>
								<li><a href="http://itmyhome.com/ibatis-pdf/" target="_blank">IBATIS2.0开发指南</a></li>
								<li><a href="http://itmyhome.com/html-pdf/" target="_blank">HTML精选属性</a></li>
								<li><a href="http://itmyhome.com/jdbc-pdf/" target="_blank">JDBC学习手册</a></li>
								<li><a href="http://itmyhome.com/programmer-job-hopping-pdf/" target="_blank">程序员跳槽全攻略</a></li>
								<li><a href="http://itmyhome.com/software-random-thoughts-pdf/" target="_blank">软件随想录</a></li>
							</ul>
						</li>
						<li><a href="http://blog.csdn.net/kesixin" target="_blank" style="font-size:14px;">CSDN</a></li>
						<li><a href="http://www.jianshu.com/u/ed95b64d8305" target="_blank" style="font-size:14px;">简书</a></li>
						<li><a style="font-size:14px;">历程</a></li>
						<li><a style="font-size:14px;">关于</a></li>
					</ul>
				</div>
			</div>
			
		</div>
	</nav>

	<header id="gtco-header" class="gtco-cover" role="banner" style="background-image:url(../../images/img_7.jpg);background-position:0px;" data-stellar-background-ratio="0.5">
		<div class="overlay"></div>
		<div class="container">
			<div class="row">
				<div class="col-md-7 text-left">
					<div class="display-t">
						<div class="display-tc animate-box" data-animate-effect="fadeInUp">
							<span class="date-post">2017-08-31</span>
							<h1 class="mb30"><a href="#">Window系统Apache2.4+
							Tomcat7.0整合配置</a></h1>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>
	
	<div id="gtco-maine">
		<div class="container">
			<div class="row row-pb-md">
				<div class="col-md-12">
					<article class="mt-negative">
						<div class="text-left content-article">
							<div class="row">
								<div class="col-lg-8 cp-r animate-box">
									
<h2 id="一关于apache和tomcat">一、关于Apache和Tomcat</h2>

<p>Apache HTTP Server（简称 Apache），是 Apache 软件基金协会的一个开放源码的网页服务器，可以在 Windows、Unix、Linux 等操作系统中运行是最流行的Web服务器软件之一。Apache 反应速度快，运行效率高，但只支持HTML等静态页面（加载插件后也可支持 PHP 页面）。</p>

<p>Tomcat 是由 Apache 软件基金协会与 Sun 公司联合开发的一款Web服务器，它除了支持HTML等静态页面外，还支持JSP、Servlet 。</p>

<p>在相同的运行环境下，Tomcat 对静态页面的反应速度没有 Apache 灵敏，整合 Apache 与 Tomcat 能使系统运行于一个良好环境下，提高系统效率。</p>



<h2 id="二运行环境">二、运行环境</h2>

<p>运行环境：Window10系统，与Window7系统整合是一样的。</p>

<p>软件包：xampp集成软件包，包含了Apache+MySQL+PHP+Tomcat，本文就不介绍Apache和Tomcat服务器的安装和配置了。</p>

<p>mod_jk.so：连接Apache和Tomcat，这里有很多版本，主要是要跟Apache版本能够匹配，不然启动Apazhe服务时会报错，启动不了。 <br>
<a href="http://archive.apache.org/dist/tomcat/tomcat-connectors/jk/binaries/windows/" target="_block">下载</a></p>

<p>JDK：JDK (Java Development Kit) 是 Sun 针对Java开发员的产品，是现今使用最广泛的Java SDK。JDK 是整个Java的核心，包括了Java运行环境和基础类库等。常用版本包括 JDK 6、JDK 7、JDK 8。 <br>
<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_block">下载</a> <br>
成功安装 JDK  后，必须设置环境变量；</p>

<p>打开 “控制面板 –&gt; 系统安全 –&gt; 系统 –&gt; 高级系统设置 –&gt; 环境变量”，增加以下配置 :</p>



<p><img src="http://upload-images.jianshu.io/upload_images/6673460-9e87bcf7a13a0edd.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" title="" class="img-responsive"></p>



<h2 id="三整合-apachetomcat">三、整合 Apache+Tomcat</h2>

<p>1、在 Apache、Tomcat 都能正常运行的情况下，把 mod_jk.mo 拷贝到 “D:\xampp\apache\modules” 文件夹下。</p>

<p>2、在 “D:\xampp\tomcat\conf” 文件夹下增加 workers.properties 文件，输入以下内容。</p>



<pre class="prettyprint"><code class=" hljs avrasm">workers<span class="hljs-preprocessor">.tomcat</span>_home=D:\xampp\tomcat
<span class="hljs-preprocessor">#让 mod_jk 模块感知 Tomcat</span>
workers<span class="hljs-preprocessor">.java</span>_home=F:\Java\jdk1<span class="hljs-number">.7</span><span class="hljs-number">.0</span>_75\jre
<span class="hljs-preprocessor">#让 mod_jk 模块感知 jre</span>
ps=\
<span class="hljs-preprocessor">#指定文件路径分割符</span>
worker<span class="hljs-preprocessor">.list</span>=config1
worker<span class="hljs-preprocessor">.config</span>1<span class="hljs-preprocessor">.port</span>=<span class="hljs-number">8009</span>
<span class="hljs-preprocessor">#工作端口，此端口应该与server.xml中Connector元素的 AJP/1.3 协议所使用的端口相匹配</span>
worker<span class="hljs-preprocessor">.config</span>1<span class="hljs-preprocessor">.host</span>=test<span class="hljs-preprocessor">.com</span>
<span class="hljs-preprocessor">#Tomcat服务器的地址</span>
worker<span class="hljs-preprocessor">.config</span>1<span class="hljs-preprocessor">.type</span>=ajp13
<span class="hljs-preprocessor">#类型</span>
worker<span class="hljs-preprocessor">.config</span>1<span class="hljs-preprocessor">.lbfactor</span>=<span class="hljs-number">1</span>
<span class="hljs-preprocessor">#负载平衡因数</span>


注意：
worker<span class="hljs-preprocessor">.list</span>=config1中，conifg1为自定义名称，但此名称必须与下文所述的 
<span class="hljs-string">"D:\xampp\apache\conf\httpd.conf "</span> 文件中 ，JkMount 指令对应的名称相匹配。</code></pre>

<p>3、加入workers.properties 文件后，可修改 “D:\xampp\apache\conf\httpd.conf” 文件，加入以下配置。 <br>
注意：JkMount 指令中的变量必须与worker.list 所配置的名称相同。</p>



<pre class="prettyprint"><code class=" hljs vbnet"><span class="hljs-preprocessor"># 设置虚拟主机</span>
<span class="hljs-preprocessor">#本地虚拟测试，需要在"C:\Windows\System32\drivers\etc"中的host文件加入："127.0.0.1    test.com"</span>
 &lt;VirtualHost *:<span class="hljs-number">80</span>&gt;
     ServerName test.com
     <span class="hljs-preprocessor">#定义服务名称</span>
     DocumentRoot <span class="hljs-string">"D:\xampp\tomcat\webapps"</span>
     <span class="hljs-preprocessor">#定义站点项目所在路径，把路径指向 tomcat 中的默认网站目录</span>
     DirectoryIndex index.html index.htm index.jsp
     ErrorLog logs/shsc-error_log.txt
     CustomLog logs/shsc-access_log.txt common
     <span class="hljs-preprocessor">#向Apache请求此文件夹内页面时，系统将转向用Tomcat解析</span>
     JkMount /* config1     
 &lt;/VirtualHost&gt;

 <span class="hljs-preprocessor"># 允许客户端访问此路径</span>
 &lt;Directory <span class="hljs-string">"D:\xampp\tomcat\webapps"</span>&gt;  
     Options Indexes FollowSymLinks  
     AllowOverride None  
     <span class="hljs-keyword">Order</span> allow,deny  
     Allow <span class="hljs-keyword">from</span> all  
 &lt;/Directory&gt;  

 LoadModule jk_module modules/mod_jk.so
 <span class="hljs-preprocessor"># 此处 mod_jk.so 文件为你下载的文件</span>
 JkWorkersFile <span class="hljs-string">"D:/xampp/tomcat/conf/workers.properties"</span>
 <span class="hljs-preprocessor"># 指定tomcat监听配置文件地址</span>
 JkLogFile <span class="hljs-string">"D:/xampp/tomcat/logs/mod_jk2.log"</span>
 <span class="hljs-preprocessor"># 指定日志存放位置</span>
 JkLogLevel info

注意：JkMount /* config1 指令代表当客户端向 Apache 发送此文件夹内 页面请求时，把处理指向
Tomcat。</code></pre>

<p>完成以上配置后，重启 Apache、Tomcat。</p>

<p>问题：如果按要求完成上面配置，在重启Apache时出现如下情况：</p>

<p><img src="http://upload-images.jianshu.io/upload_images/6673460-ab937b2bd67875b7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" title="" class="img-responsive"></p>

<p>那可能是你的mod_jk.so文件的版本跟Apache服务器版本不匹配，需要重新下载正确的版本，最好是下载最新版本，也不要去下载网上一些mod_jk.so文件，一般很难找到匹配的，而要根据安装的Apache版本去官网下载对应的版本再重新拷贝到modules文件夹中。</p>

<p>测试成功如下图： <br>
<img src="http://upload-images.jianshu.io/upload_images/6673460-cd17a77628d0f6ff.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" title="" class="img-responsive"></p>

<p>好了，Window系统Apache2.4+Tomcat7.0整合配置到此完成，下篇博文将讲解在Linux系统的整合配置。</p>
								</div>
								<div class="col-lg-4 animate-box">
									<div class="gtco-highlight right">
										<h4>点点滴滴</h4>
										<p style="font-size:15px;">光陰如梭。時間總是如白駒過隙般，從我們身邊輕輕的掠過。爲了記錄身邊逝去的時光，我將日常瑣碎的事情記錄在此。十年後的我，又將怎樣看待這些瑣碎的事情呢？</p>
									</div>
								</div>
							</div>
													
						</div>
					</article>
				</div>
			</div>
		</div>
	</div>



	<footer id="gtco-footer" role="contentinfo" style="padding:0;">
		<div class="container">
			<div class="row copyright">
				<div class="col-md-12 text-center">
					<p>
						 <span style="font-size:16px;">©</span>2017 版权所有 ICP证：<a href="http://www.miitbeian.gov.cn/" target="_block" style="color:#666666">粤ICP备17112246号</a>
					</p>
				</div>
			</div>

		</div>
	</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="../../js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="../../js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="../../js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="../../js/jquery.waypoints.min.js"></script>
	<!-- Stellar -->
	<script src="../../js/jquery.stellar.min.js"></script>
	<!-- Main -->
	<script src="../../js/main.js"></script>

	</body>
</html>

