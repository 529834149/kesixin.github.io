<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>KSX - 个人博客</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Website Template by GetTemplates.co" />
	<meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />

	<link href="../../favicon.ico" rel="icon" type="image/x-icon" />
	<link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i|Roboto+Mono" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="../../css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="../../css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="../../css/bootstrap.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="../../css/magnific-popup.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="../../css/style.css">

	<!-- Modernizr JS -->
	<script src="../../js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

	</head>
	<body>
		
	<div class="gtco-loader"></div>
	
	<div id="page">
	<nav class="gtco-nav" role="navigation">
		<div class="container">
			<div class="row">
				<div class="col-xs-2 text-left">
					<div id="gtco-logo"><a href="index.html">KSX<span>.</span></a></div>
				</div>
				<div class="col-xs-10 text-right menu-1">
					<ul>
						<li><a href="../../index.html" style="font-size:16px;font-weight: bold;">首页</a></li>
						<li class="active"><a href="../../archive.html" style="font-size:16px;font-weight: bold;">归档</a></li>
						<li><a href="../../category.html" style="font-size:16px;font-weight: bold;">分类</a></li>
						<li class="has-dropdown">
							<a style="font-size:16px;font-weight: bold;">API</a>
							<ul class="dropdown">
								<li><a href="http://itmyhome.com/git/" target="_blank">Git</a></li>
								<li><a href="http://itmyhome.com/progit/" target="_blank">Pro Git</a></li>
								<li><a href="http://itmyhome.com/jq/" target="_blank">JQuery</a></li>
								<li><a href="http://itmyhome.com/easyui/" target="_blank">EasyUI</a></li>
								<li><a href="http://itmyhome.com/bootstrap/" target="_blank">Bootstrap</a></li>
								<li><a href="http://itmyhome.com/markdown/" target="_blank">Markdown</a></li>
								<li><a href="http://itmyhome.com/front/" target="_blank">前端开发规范手册</a></li>
								<li><a href="http://itmyhome.com/js/" target="_blank">JavaScript</a></li>
								<li><a href="http://itmyhome.com/html/" target="_blank">HTML</a></li>
								<li><a href="http://itmyhome.com/css/" target="_blank">CSS</a></li>
								<li><a href="http://itmyhome.com/rgb/" target="_blank">RGB</a></li>
							</ul>
						</li>
						<li class="has-dropdown">
							<a style="font-size:16px;font-weight: bold;">PDF</a>
							<ul class="dropdown">
								<li><a href="http://itmyhome.com/progit-pdf/" target="_blank">Pro Git </a></li>
								<li><a href="http://itmyhome.com/the-definitive-guide-of-git-pdf/" target="_blank">Git权威指南</a></li>
								<li><a href="http://itmyhome.com/javascript-pdf/" target="_blank">JavaScript权威指南</a></li>
								<li><a href="http://itmyhome.com/jquery-in-action-pdf/" target="_blank">jQuery实战</a></li>
								<li><a href="http://itmyhome.com/mybatis-pdf/" target="_blank">MyBatis3用户指南</a></li>
								<li><a href="http://itmyhome.com/ibatis-pdf/" target="_blank">IBATIS2.0开发指南</a></li>
								<li><a href="http://itmyhome.com/html-pdf/" target="_blank">HTML精选属性</a></li>
								<li><a href="http://itmyhome.com/jdbc-pdf/" target="_blank">JDBC学习手册</a></li>
								<li><a href="http://itmyhome.com/programmer-job-hopping-pdf/" target="_blank">程序员跳槽全攻略</a></li>
								<li><a href="http://itmyhome.com/software-random-thoughts-pdf/" target="_blank">软件随想录</a></li>
							</ul>
						</li>
						<li><a href="http://blog.csdn.net/kesixin" target="_blank" style="font-size:16px;font-weight: bold;">CSDN</a></li>
						<li><a href="http://www.jianshu.com/u/ed95b64d8305" target="_blank" style="font-size:16px;font-weight: bold;">简书</a></li>
						<li><a href="../../history.html" style="font-size:16px;font-weight: bold;">历程</a></li>
						<li><a href="../../history.html" style="font-size:16px;font-weight: bold;">关于</a></li>
					</ul>
				</div>
			</div>
			
		</div>
	</nav>

	<header id="gtco-header" class="gtco-cover" role="banner" style="background-image:url(../../images/img_7.jpg);background-position:0px;" data-stellar-background-ratio="0.5">
		<div class="overlay"></div>
		<div class="container">
			<div class="row">
				<div class="col-md-7 text-left">
					<div class="display-t">
						<div class="display-tc animate-box" data-animate-effect="fadeInUp">
							<span class="date-post">2017-07-23</span>
							<h1 class="mb30"><a href="#">PHP判断是手机移动端访问还是PC端访问的函数</a></h1>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>
	
	<div id="gtco-maine">
		<div class="container">
			<div class="row row-pb-md">
				<div class="col-md-12">
					<article class="mt-negative">
						<div class="text-left content-article">
							<div class="row">
								<div class="col-lg-8 cp-r animate-box">
<p>最近在开发项目的时候，分别开发了PC端和手机端，需要实现，用手机访问PC端WWW域名的时候，自动判断跳转到移动端，用电脑访问M域名手机网站的时候，自动跳转到PC端网站，于是有了下面这个判断函数：</p>



<pre class="prettyprint"><code class=" hljs php"><span class="hljs-comment">/**
  * 移动端判断
  */</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isMobile</span><span class="hljs-params">()</span>
{</span> 
    <span class="hljs-comment">// 如果有HTTP_X_WAP_PROFILE则一定是移动设备</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span> (<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'HTTP_X_WAP_PROFILE'</span>]))
    {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    } 
    <span class="hljs-comment">// 如果via信息含有wap则一定是移动设备</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span> (<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'HTTP_VIA'</span>]))
    { 
        <span class="hljs-comment">// 找不到为flase,否则为true</span>
        <span class="hljs-keyword">return</span> stristr(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'HTTP_VIA'</span>], <span class="hljs-string">"wap"</span>) ? <span class="hljs-keyword">true</span> : <span class="hljs-keyword">false</span>;
    } 
    <span class="hljs-comment">// 脑残法，判断手机发送的客户端标志,兼容性有待提高</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span> (<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'HTTP_USER_AGENT'</span>]))
    {
        <span class="hljs-variable">$clientkeywords</span> = <span class="hljs-keyword">array</span> (<span class="hljs-string">'nokia'</span>,
            <span class="hljs-string">'sony'</span>,
            <span class="hljs-string">'ericsson'</span>,
            <span class="hljs-string">'mot'</span>,
            <span class="hljs-string">'samsung'</span>,
            <span class="hljs-string">'htc'</span>,
            <span class="hljs-string">'sgh'</span>,
            <span class="hljs-string">'lg'</span>,
            <span class="hljs-string">'sharp'</span>,
            <span class="hljs-string">'sie-'</span>,
            <span class="hljs-string">'philips'</span>,
            <span class="hljs-string">'panasonic'</span>,
            <span class="hljs-string">'alcatel'</span>,
            <span class="hljs-string">'lenovo'</span>,
            <span class="hljs-string">'iphone'</span>,
            <span class="hljs-string">'ipod'</span>,
            <span class="hljs-string">'blackberry'</span>,
            <span class="hljs-string">'meizu'</span>,
            <span class="hljs-string">'android'</span>,
            <span class="hljs-string">'netfront'</span>,
            <span class="hljs-string">'symbian'</span>,
            <span class="hljs-string">'ucweb'</span>,
            <span class="hljs-string">'windowsce'</span>,
            <span class="hljs-string">'palm'</span>,
            <span class="hljs-string">'operamini'</span>,
            <span class="hljs-string">'operamobi'</span>,
            <span class="hljs-string">'openwave'</span>,
            <span class="hljs-string">'nexusone'</span>,
            <span class="hljs-string">'cldc'</span>,
            <span class="hljs-string">'midp'</span>,
            <span class="hljs-string">'wap'</span>,
            <span class="hljs-string">'mobile'</span>
            ); 
        <span class="hljs-comment">// 从HTTP_USER_AGENT中查找手机浏览器的关键字</span>
        <span class="hljs-keyword">if</span> (preg_match(<span class="hljs-string">"/("</span> . implode(<span class="hljs-string">'|'</span>, <span class="hljs-variable">$clientkeywords</span>) . <span class="hljs-string">")/i"</span>, strtolower(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'HTTP_USER_AGENT'</span>])))
        {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        } 
    } 
    <span class="hljs-comment">// 协议法，因为有可能不准确，放到最后判断</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span> (<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'HTTP_ACCEPT'</span>]))
    { 
        <span class="hljs-comment">// 如果只支持wml并且不支持html那一定是移动设备</span>
        <span class="hljs-comment">// 如果支持wml和html但是wml在html之前则是移动设备</span>
        <span class="hljs-keyword">if</span> ((strpos(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'HTTP_ACCEPT'</span>], <span class="hljs-string">'vnd.wap.wml'</span>) !== <span class="hljs-keyword">false</span>) &amp;&amp; (strpos(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'HTTP_ACCEPT'</span>], <span class="hljs-string">'text/html'</span>) === <span class="hljs-keyword">false</span> || (strpos(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'HTTP_ACCEPT'</span>], <span class="hljs-string">'vnd.wap.wml'</span>) &lt; strpos(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">'HTTP_ACCEPT'</span>], <span class="hljs-string">'text/html'</span>))))
        {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        } 
    } 
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
} </code></pre>
								</div>
								<div class="col-lg-4 animate-box">
									<div class="gtco-highlight right">
										<h4>点点滴滴</h4>
										<p style="font-size:15px;">人生不過是一個行走的影子，一個在舞台上指手劃腳的笨拙的憐人，登場片刻，便在無聲無息中悄然退下；它是一個愚人所講的故事，充滿著喧嘩和騷動，卻找不到一點意義。</p>
									</div>
								</div>
							</div>
													
						</div>
					</article>
				</div>
			</div>
		</div>
	</div>



	<footer id="gtco-footer" role="contentinfo" style="padding:0;">
		<div class="container">
			<div class="row copyright">
				<div class="col-md-12 text-center">
					<p>
						<span style="font-size:16px;">©</span>2017 版权所有 ICP证：<a href="http://www.miitbeian.gov.cn/" target="_block" style="color:#666666">粤ICP备17112246号</a>
					</p>
				</div>
			</div>

		</div>
	</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="../../js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="../../js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="../../js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="../../js/jquery.waypoints.min.js"></script>
	<!-- Stellar -->
	<script src="../../js/jquery.stellar.min.js"></script>
	<!-- Main -->
	<script src="../../js/main.js"></script>

	</body>
</html>

